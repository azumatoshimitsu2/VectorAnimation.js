function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Vector=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"add",value:function(t,e){return x=t.x+e.x,y=t.y+e.y,{x:x,y:y}}},{key:"sub",value:function(t,e){return x=t.x-e.x,y=t.y-e.y,{x:x,y:y}}},{key:"mult",value:function(t,e){return x=t.x*e,y=t.y*e,{x:x,y:y}}},{key:"div",value:function(t,e){return x=t.x/e,y=t.y/e,{x:x,y:y}}},{key:"normalize",value:function(t){var e=this.mag(t);return 0!==e?this.div(t,e):t}},{key:"mag",value:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}}]),t}(),VectorAnimation=function(){function e(t){if(_classCallCheck(this,e),!t)throw new Error("please argments 引数は必須です");this.stageId=t.stageId,this.location=t.location?t.location:{x:0,y:0},this.friction=t.friction||.9,this.velocity={x:0,y:0},this.acceleration={x:0,y:0},this.mass=t.mass||10,this.maxspeed=t.maxspeed||10,this.minspeed=t.minspeed||2.8,this.damage=t.damage||.98,this.rad=t.rad||100,this.gravityPoints=t.gravityPoints||{},this.currentGPointNum=0,this.vector=Vector,this.showGravityPointsColor=t.showGravityPointsColor,this.gravityPoints.forEach(function(t,e){t.isAnimationEnd=!1})}return _createClass(e,[{key:"draw",value:function(){return this}},{key:"update",value:function(){return this.velocity=this.vector.add(this.velocity,this.acceleration),this.velocity=this.vector.mult(this.velocity,this.damage),this.location=this.vector.add(this.location,this.velocity),this.acceleration=this.vector.mult(this.acceleration,0),this}},{key:"applyForce",value:function(t){return t=this.vector.div(t,this.mass),this.acceleration=this.vector.add(this.acceleration,t),this}},{key:"seek",value:function(t){var e=t||{},i=e.g||this.gravityPoints[this.currentGPointNum].g,o=e.x&&e.y?{x:e.x,y:e.y}:this.gravityPoints[this.currentGPointNum].pos,n=this.vector.sub(o,this.location),s=this.vector.normalize(n),a=this.vector.mult(s,i);this.applyForce(a)}},{key:"arrive",value:function(t){var e=this.gravityPoints[this.currentGPointNum],i=this.vector.sub(e.pos,this.location),o=this.vector.mag(i),n=this.vector.normalize(i),s={x:0,y:0},a={x:0,y:0};if(o<this.rad){var r=!1;this.gravityPoints.length-1>this.currentGPointNum&&(r=!0);var c=this.minspeed;r||(c=this.map(o,0,this.rad,0,4)),s=this.vector.mult(n,c),a=this.vector.sub(s,this.velocity),this.applyForce(a),!e.isAnimationEnd&&this.vector.mag(i)<1&&(e.isAnimationEnd=!0,e.callback(this),r&&(this.currentGPointNum+=1,this.acceleration={x:0,y:0}))}else this.seek()}},{key:"getPoint",value:function(){return{x:this.location.x,y:this.location.y}}},{key:"map",value:function(t,e,i,o,n){return(n-o)/(i-e)*t}},{key:"showGravityPoints",value:function(){var s=this,a=document.getElementById(this.stageId);this.gravityPoints.forEach(function(t,e){var i=s.showGravityPointsColor,o=i||"#000",n=document.createElement("div");n.appendChild(document.createTextNode(e)),n.style.backgroundColor=o,n.style.position="absolute",n.style.left=t.pos.x+"px",n.style.top=t.pos.y+"px",n.style.width="20px",n.style.height="20px",n.style.lineHeight="20px",n.style.color="#fff",n.style.textAlign="center",a.appendChild(n)})}}]),e}();!function(){function t(t){console.log("e")}var e=document.querySelector(".thing"),i=document.querySelector(".thing2"),o=document.querySelector(".thing3"),n=e.style,s=i.style,a=o.style,r=[{pos:{x:300,y:300},g:1.5,mass:10,minspeed:4,callback:t},{pos:{x:300,y:200},g:.5,mass:20,minspeed:1.8,callback:t},{pos:{x:330,y:300},g:.5,mass:40,minspeed:1.8,callback:t}],c=[];c.push(new VectorAnimation({stageId:"stage",location:{x:100,y:100},gravityPoints:r})),c.push(new VectorAnimation({stageId:"stage",location:{x:200,y:200},gravityPoints:[{pos:{x:100,y:100},g:1,callback:t}],showGravityPointsColor:"#0f0"})),c.push(new VectorAnimation({stageId:"stage",location:{x:100,y:100},gravityPoints:[{pos:{x:400,y:100},g:1,callback:t}],showGravityPointsColor:"#00f"})),requestAnimationFrame(function t(){for(var e=0;e<c.length;e++)if(0==e){c[e].arrive();var i=c[e].update().getPoint();n.left=i.x+"px",n.top=i.y+"px"}else 1==e?(c[e].seek(),i=c[e].update().getPoint(),s.left=i.x+"px",s.top=i.y+"px"):(c[e].arrive(),i=c[e].update().getPoint(),a.left=i.x+"px",a.top=i.y+"px");window.requestAnimationFrame(t)})}();//# sourceMappingURL=sample.js.map
